# `build_article` process

- create pkgdown data structure, via `pkgdown::as_pkgdown()`, that contains package metadata needed for building site
    - QUESTION: will we need to rewrite this since our setup is different?
    - TODO: investigate how this metadata is gathered, and think about how approach should be altered
- set environment variables for pkgdown
- extract front matter from Rmd
- construct "data" to be passed to template
- `build_rmarkdown_format` Returns output format object based on template. Deletes tempfile template.
    - `rmarkdown_template`. Creates HTML documents in appropriate folder.
        - `render_page`
            - `render_page_html`
                - `find_template` - return path pointing to template 
                    - `template_candidates` - create paths of candidate locations for templates
                - `render_template` - use whisker to render html by passing data to template
                    - `whisker::whisker.render` - renders template with mustache, returning character string
            - `tweak_page` - makes tweaks to the page
                - `tweak_reference_highlighting` - synatax highlighting -- probably don't need
                - `tweak_extra_logo` - finds logos and deletes them -- maybe keep
                - `tweak_anchors` - create anchors for headings -- should keep
                - `tweak_link_md` - fix links somehow -- probably keep
                - `tweak_img_src` - fix image relative links--that is links to images within package--by pointing to right relative path within pkgdown site (not same as within package)
                - `tweak_strip` - remove the strip, which has a certain class -- probably keep
                - `tweak_footnotes` - tweak footnotes somehow -- probably keep, since don't see how it applies to BS5 templates
                - `tweak_tabsets` - remove tabsets -- probably keep
                - `tweak_useless_toc` - remove TOC -- probably keep
                - `tweak_link_R6` - fix link to R6 -- probably keep, even though not applicable
            - `write_if_different` - 
                - `made_by_pkgdown` - determine whether contents are made by pkgdown, by checking if folder exists and, if so, whether first lines contain "Generated by pkgdown" comment
                - `same_content` - check whether new file and old file are the same, based on MD5 and hash
                - `write_lines` - write file to disk via readr::write_lines
- `render_rmarkdown`. Renders document and returns path to it
    - `callr::r_safe(... rmarkdown::render(...) )` Render in a separate session that is isolated from user params. Return path to rendered document
    - `update_html`. Change HTML file on disk. Replacing ASCII character with paragraph separator (?). Returns path to file
        - `tweak_rmarkdown_html`. Tweak classes and file paths in HTML


# Questions

- Getting YAML from regular md. Can md contain YAML? Can R functions do that?

# Next steps

- Create adodown package
    - Use pkgdown or create own flavor of it?
- Create Stata package
    - Initially, with same structure as R package
    - Later, with (DIME's) Stata structure
        - /src/
            - /ado_files/
            - /help_files/
